openapi: 3.0.0
info:
  version: v1.0
  title: Consent Management API
  description: This API provides a comprehensive set of endpoints for managing the consents, This handles the entire consent lifecycle, from initiation and authorization to validation, administration, and revocation.
  contact:
    name: WSO2
    url: 'https://wso2.com/solutions/financial-services/'
    email: "architecture@wso2.com"
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
servers:
  - url: https://{km_host}:{km_port}/api/consent-mgt/
    variables:
      km_host:
        default: localhost
        description: Hostname of the Key Manager server.
      km_port:
        default: "9446"
        description: Port number for the Key Manager server.
tags:
  - name: Consent
    description: Provides RESTful endpoints to handle the full lifecycle of consent resources, their associated authorizations, and attached files. Supports operations such as initiation, retrieval, update, and revocation.
paths:
  /consents:
    post:
      summary: Initiate a new consent resource
      description: |
        This endpoint is used to initiate a new consent resource.  

        In order to handle custom requirements, The endpoint invokes the following **extension points**:
        - **/pre-process-consent-creation**: to verify inputs according to the regulation requirements and obtain the mapping of consent data to store.
        - **/enrich-consent-creation-response**: to handle response construction, additional validations, and any custom processing after consent creation.
        
        Upon success, the system creates a **consent resource** with: A unique `consentId`  
      operationId: consents-POST
      tags:
        - Consent
      parameters:
        - in: header
          name: org-id
          required: true
          description: "The unique identifier for the organization (e.g., the bank) that this consent belongs to."
          schema:
            type: string
        - in: header
          name: TPP-client-id
          required: true
          description: "The client ID of the Third-Party Provider (TPP) application that is requesting the consent."
          schema:
            type: string
      requestBody:
        description: The payload containing the consent data.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConsentCreatePayload"
      responses:
        "201":
          description: Successfully initiated the consent. The response body contains the details of the newly created consent resource, including its `consentID`.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentCreatedResponse"
        "400":
          description: Bad Request. The request was malformed. This could be due to missing required headers or an invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error. An unexpected error occurred on the server while trying to create the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
      security:
        - basicAuth: []
    get:
      summary: Search for consents
      description: |
        Provides a powerful search capability to find consents based on various filter criteria like consent type, status, client ID , user ID and time range. Supports pagination.
      
      operationId: consents-search-GET
      tags:
        - Consent
      parameters:
        - in: header
          name: org-id
          required: true
          description: "Organisation ID."
          schema:
            type: string
        - name: consentTypes
          in: query
          description: A comma-separated list of consent types to filter by (e.g., 'accounts,payments').
          schema:
            type: string
        - name: consentStatuses
          in: query
          description: A comma-separated list of consent statuses to filter by (e.g., 'authorised,revoked').
          schema:
            type: string
        - name: clientIds
          in: query
          description: A comma-separated list of TPP client IDs to filter by.
          schema:
            type: string
        - name: userIds
          in: query
          description: A comma-separated list of end-user IDs to filter by.
          schema:
            type: string
        - name: fromTime
          in: query
          description: The start of the time window for the search, as a Unix timestamp (integer).
          schema:
            type: integer
            format: int32
        - name: toTime
          in: query
          description: The end of the time window for the search, as a Unix timestamp (integer).
          schema:
            type: integer
            format: int32
        - name: withConsentFile
          in: query
          description: "Optional flag to retrieve the consent file along with the consent details."
          schema:
            type: boolean
        - name: limit
          in: query
          description: The maximum number of results to return in a single page. Used for pagination.
          schema:
            type: integer
            format: int32
        - name: offset
          in: query
          description: The number of results to skip. Used for pagination.
          schema:
            type: integer
            format: int32
      responses:
        "200":
          description: OK. Returns a list of consents matching the search criteria, along with pagination metadata.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentSearchResponse"
        "400":
          description: Bad Request. The search parameters provided are invalid.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
      security:
        - basicAuth: []
  /consents/{consentId}:
    get:
      summary: Retrieve a consent by its ID
      description: |
        Fetches the complete details of a specific consent resource using
        its unique `consentID`. This is used to check the status and details of a consent.

        In order to handle requirements, The endpoint invokes following **extension point**:
        - **/pre-process-consent-retrieval**: handle pre-consent retrieval validations and to return a custom response payload.

      operationId: consents-GET
      tags:
        - Consent
      parameters:
        - in: header
          name: org-id
          required: true
          description: "The unique identifier for the organization (e.g., the bank) that this consent belongs to."
          schema:
            type: string
        - in: header
          name: TPP-client-id
          required: true
          description: "The client ID of the Third-Party Provider (TPP) application that owns the consent."
          schema:
            type: string
        - name: withConsentFile
          in: query
          description: "Optional flag to retrieve the consent file along with the consent details."
          schema:
            type: boolean
        - in: path
          name: consentId
          required: true
          description: The unique identifier of the consent to retrieve.
          schema:
            type: string
      responses:
        "200":
          description: OK. The full details of the requested consent are returned in the response body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentRetrievalResponse"
        "400":
          description: Bad Request. The request was invalid, possibly due to a malformed `consentID` or missing headers.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error. An unexpected error occurred on the server.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
      security:
        - basicAuth: []
    put:
      tags:
        - Consent
      summary: Update a consent resource by its ID
      description: |
        Endpoint to perform a full update on a consent resource, including its authorization resources and attributes, in a single operation.

        In order to handle custom requirements, The endpoint invokes the following **extension points**:
        
        - **/pre-process-consent-update**: to verify inputs according to the regulation requirements and obtain the mapping of consent data to store.
        - **/enrich-consent-update-response**: to handle response construction, additional validations, and any custom processing after consent update.
      operationId: consents-PUT
      parameters:
        - in: header
          name: org-id
          required: true
          description: "Organisation ID."
          schema:
            type: string
        - in: header
          name: TPP-client-id
          required: true
          description: "The client ID of the Third-Party Provider (TPP) application that is requesting the consent."
          schema:
            type: string
        - name: consentId
          in: path
          description: The unique identifier of the consent to update.
          required: true
          schema:
            type: string
      requestBody:
        description: The full consent resource object with the desired updates.
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/ConsentUpdateRequest"
        required: true
      responses:
        "200":
          description: OK. The full details of the requested consent are returned in the response body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentUpdateResponse"
        "400":
          description: Bad Request. The request was malformed. This could be due to missing required headers or an invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error. An unexpected error occurred on the server while trying to update the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
      security:
        - basicAuth: []
  /consents/{consentId}/revoke:
    put:
      summary: Revoke a consent
      description: |
       Allows to revoke a consent. This action typically updates the consent status to a **revoke** type of status.
       
       In order to handle pre-consent revocation validations, The endpoint invokes the following **extension point**:
        - **/pre-process-consent-revoke**
      operationId: consents-revoke-POST
      tags:
        - Consent
      parameters:
        - in: header
          name: org-id
          required: true
          description: "The unique identifier for the organization (e.g., the bank) that this consent belongs to."
          schema:
            type: string
        - name: consentId
          in: path
          description: The unique identifier of the consent to update.
          required: true
          schema:
            type: string
        - in: header
          name: TPP-client-id
          required: true
          description: "The client ID of the Third-Party Provider (TPP) application that is requesting the consent."
          schema:
            type: string
      requestBody:
        description: The payload containing the consent data.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConsentRevokePayload"
      responses:
        "201":
          description: Successfully revoked the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentRevokedResponse"
        "400":
          description: Bad Request. The request was malformed. This could be due to missing required headers or an invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error. An unexpected error occurred on the server while trying to create the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
      security:
        - basicAuth: []
  /consents/{consentId}/file:
    post:
      summary: Upload a consent-related file
      description: |
        Uploads and associates a file with an existing consent.

        In order to handle custom requirements, The endpoint invokes the following **extension points**:
        
        - **/pre-process-consent-file-upload**: Handle pre validations related to file upload requests.
        - **/enrich-consent-file-response**: Modify the response sent in the file upload request after successfully storig the file.
      operationId: consents-file-POST
      tags:
        - Consent
      parameters:
        - in: header
          name: org-id
          required: true
          description: "Organisation ID."
          schema:
            type: string
        - in: header
          name: TPP-client-id
          required: true
          description: "TPP Application client Id."
          schema:
            type: string
        - in: path
          name: consentId
          required: true
          description: The unique identifier of the consent to associate the file with.
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                resourceFile:
                  type: object
                  format: binary
                  description: This represents the corresponding resource file that needs to be added.
      responses:
        "201":
          description: Created. The file was successfully uploaded and associated with the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentFileUploadResponse"
        "400":
          description: Bad Request. Required parameters are unavailable.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
      security:
        - basicAuth: []
    get:
      summary: Download a consent-related file
      description: |
        Retrieves a file that has been associated with a specific consent.
        
        The response body expected to contain the consent file. In order to handle custom validations, The endpoint invokes following **extension point**:
        - **/validate-consent-file-retrieval**: Handle validations related to file retrieval and return a response
      operationId: consents-file-GET
      tags:
        - Consent
      parameters:
        - in: header
          name: org-id
          required: true
          description: "Organisation ID."
          schema:
            type: string
        - in: header
          name: TPP-client-id
          required: true
          description: "TPP Application client Id."
          schema:
            type: string
        - in: path
          name: consentId
          required: true
          description: The unique identifier of the consent associated with the file.
          schema:
            type: string
      responses:
        "200":
          description: OK. The file content is returned in the response body.
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/File"
        "400":
          description: Bad Request. Required parameters are unavailable or invalid.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
      security:
        - basicAuth: []
    put:
      summary: Update a consent-related file
      description: |
        Updates a file that has been associated with a specific consent.

        In order to handle custom requirements, The endpoint invokes the following **extension points**:
        
        - **/pre-process-consent-file-update**: Handle pre validations related to file update requests.
        - **/enrich-consent-file-update-response**: Modify the response sent in the file update request after successfully storig the updated file.
      operationId: consent-file-PUT
      tags:
        - Consent
      parameters:
        - in: header
          name: org-id
          required: true
          description: "Organisation ID."
          schema:
            type: string
        - in: header
          name: TPP-client-id
          required: true
          description: "TPP Application client Id."
          schema:
            type: string
        - in: path
          name: consentId
          required: true
          description: The unique identifier of the consent to associate the file with.
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                resourceFile:
                  type: object
                  format: binary
                  description: This represents the corresponding resource file that needs to be added.
      responses:
        "201":
          description: Created. The file was successfully uploaded and associated with the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentFileUpdateResponse"
        "400":
          description: Bad Request. Required parameters are unavailable.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
      security:
        - basicAuth: []
  /consents/{consentId}/authorizations:
    post:
      tags:
        - Consent
      summary: Add an authorization resource to a consent
      description: Creates a new authorization resource and links it to the specified consent. This is typically done when a user interacts with the consent (e.g., at the start of the authorization flow).
      operationId: consents-authorizations-POST
      parameters:
        - in: header
          name: org-id
          required: true
          description: "Organisation ID."
          schema:
            type: string
        - name: consentId
          in: path
          description: The unique identifier of the consent.
          required: true
          schema:
            type: string
      requestBody:
        description: Details of the authorization resource to be created.
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/AuthorizationResourceRequestBody"
        required: true
      responses:
        '200':
          description: OK. Returns the details of the authorization resource.
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/ConsentAuthorizationResource"
        "400":
          description: Bad Request. The request was malformed. This could be due to missing required headers or an invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error. An unexpected error occurred on the server while trying to create the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon" 
      security:
        - basicAuth: []
    get:
      tags:
        - Consent
      summary: Retrieve all authorization resources for a consent
      description: Retrieves a list of all authorization resources associated with a specific consent.
      operationId: consentAuthorizationGet
      parameters:
        - in: header
          name: org-id
          required: true
          description: "Organisation ID."
          schema:
            type: string
        - name: consentId
          in: path
          description: The unique identifier of the consent.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK. Returns an array of authorization resources.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ConsentAuthorizationResource"
        "400":
          description: Bad Request. The request was malformed. This could be due to missing required headers or an invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error. An unexpected error occurred on the server while trying to create the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"  
      security:
        - basicAuth: []
  /consents/{consentId}/authorizations/{authorizationId}:
    get:
      tags:
        - Consent
      summary: Retrieve a specific authorization resource
      description: Retrieves the details of a specific authorization resource linked to a given consent.
      operationId: consentAuthorizationIdGet
      parameters:
        - in: header
          name: org-id
          required: true
          description: "Organisation ID."
          schema:
            type: string
        - name: consentId
          in: path
          description: The unique identifier of the consent.
          required: true
          schema:
            type: string
        - name: authorizationId
          in: path
          description: The unique identifier of the authorization resource.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK. Returns the details of the authorization resource.
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/ConsentAuthorizationResource"
        "400":
          description: Bad Request. The request was malformed. This could be due to missing required headers or an invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error. An unexpected error occurred on the server while trying to create the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon" 
      security:
        - basicAuth: []
    put:
      tags:
        - Consent
      summary: Update an authorization resource
      description: Updates the details (e.g., status) of a specific authorization resource associated with the given consent.
      operationId: consentAuthorizationIdPut
      parameters:
        - in: header
          name: org-id
          required: true
          description: "Organisation ID."
          schema:
            type: string
        - name: consentId
          in: path
          description: The unique identifier of the consent.
          required: true
          schema:
            type: string
        - name: authorizationId
          in: path
          description: The unique identifier of the authorization resource to update.
          required: true
          schema:
            type: string
      requestBody:
        description: The updated details for the authorization resource.
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/AuthorizationResourceRequestBody"
        required: true
      responses:
        '200':
          description: OK. Returns the details of the authorization resource.
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/ConsentAuthorizationResource"
        "400":
          description: Bad Request. The request was malformed. This could be due to missing required headers or an invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon"
        "500":
          description: Internal Server Error. An unexpected error occurred on the server while trying to create the consent.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConsentErrorCommon" 
      security:
        - basicAuth: []
components:
  schemas:
    File:
      type: object
      description: Represents a file to be uploaded or downloaded.
      additionalProperties: false
      properties: {}
    AuthorizationResourceRequestBody:
      type: object
      description: Payload for creating or updating an authorization resource.
      required:
        - authorizationStatus
        - authorizationType
        - userId
      properties:
        userId:
          description: The unique ID of the user who performed this authorization.
          type: string
          example: "admin@carbon.super"
        type:
          description: The type of authorization (e.g., 'authorisation', 're-authorisation').
          type: string
          example: "authorisation"
        status:
          description: The current status of this specific authorization (e.g., 'created', 'authorised', 'rejected').
          type: string
          example: "created"
        resource:
          description: Additional resource data related to the authorization.
          type: object
    ConsentRevokePayload:
      type: object
      description: The request body for revoking a consent.
      properties:
        actionBy:
          description: Identifier of the user or system performing the delete/revoke action.
          type: string
          example: "admin@wso2.com"
        revocationReason:
          description: The reason for revoking the consent.
          type: string
          example: "Admin revoke"
        revokedConsentStatus:
          description: The status to set for the consent upon revocation.
          type: string
          example: "revoked"
    ConsentCreatePayload:
      type: object
      description: The request body for initiating a new consent.
      properties:
        type:
          description: The type of consent (e.g., 'accounts', 'payments').
          type: string
          example: "accounts"
        status:
          description: The current status of the consent in its lifecycle (e.g., 'AwaitingAuthorisation', 'authorised', 'revoked', 'expired').
          type: string
          example: "AwaitingAuthorisation"
        validityTime:
          description: The duration for which the consent is valid, in seconds. '0' may indicate it does not expire automatically.
          type: string
          example: "0"
        recurringIndicator:
          description: A boolean flag indicating if the consent is for a recurring payment or access.
          type: string
          example: "false"
        frequency:
          description: For recurring consents, this indicates the frequency (e.g., per day). '0' may indicate no limit.
          type: string
          example: "0"
        requestPayload:
          description: The original consent initiation request payload from the TPP.
          type: object
        attributes:
          description: A key-value map of additional, non-standard attributes associated with the consent.
          type: object
          properties:
            key:
              type: string
        authorizations:
          description: An array of authorization resources linked to this consent, detailing which users have acted upon it.
          type: array
          items:
            $ref: "#/components/schemas/ConsentAuthorizationCreatePayload"
    ConsentAuthorizationCreatePayload:
      type: object
      description: Represents a detaild authorization object.
      properties:
        userId:
          description: The unique ID of the user who performed this authorization.
          type: string
          example: "admin@carbon.super"
        type:
          description: The type of authorization (e.g., 'authorisation', 're-authorisation').
          type: string
          example: "authorisation"
        status:
          description: The current status of this specific authorization (e.g., 'created', 'authorised', 'rejected').
          type: string
          example: "created"
        resource:
          description: Additional resource data related to the authorization.
          type: object
    ConsentAuthorizationCreateResponse:
      type: object
      description: Represents a detaild authorization object.
      properties:
        id:
          description: Auth Id
          type: string
          example: "auth_id"
        userId:
          description: The unique ID of the user who performed this authorization.
          type: string
          example: "admin@carbon.super"
        type:
          description: The type of authorization (e.g., 'authorisation', 're-authorisation').
          type: string
          example: "authorisation"
        status:
          description: The current status of this specific authorization (e.g., 'created', 'authorised', 'rejected').
          type: string
          example: "created"
        updatedTime:
          type: integer
          format: int32
        resource:
          description: Additional resource data related to the authorization.
          type: object
    ConsentErrorCommon:
      type: object
      description: A standardized error response object.
      properties:
        code:
          description: Error code.
          type: string
        message:
          description: A short, human-readable summary of the problem.
          type: string
        description:
          description: A detailed explanation of the error.
          type: string
        traceId:
          description: TraceId
          type: string        
    ConsentSearchResponse:
      type: object
      description: The response from a successful consent search query.
      properties:
        data:
          description: An array of detailed consent objects matching the search criteria.
          type: array
          items:
            $ref: "#/components/schemas/ConsentDetail"
        meatadata:
          $ref: "#/components/schemas/ConsentSearchMetadata"
    ConsentUpdateRequest:
      type: object
      description: A generic success response for consent management operations that return consent details.
      properties:
        type:
          description: The type of consent (e.g., 'accounts', 'payments').
          type: string
          example: "accounts"
        status:
          description: The current status of the consent in its lifecycle (e.g., 'AwaitingAuthorisation', 'authorised', 'revoked', 'expired').
          type: string
          example: "AwaitingAuthorisation"
        validityTime:
          description: The duration for which the consent is valid, in seconds. '0' may indicate it does not expire automatically.
          type: string
          example: "0"
        recurringIndicator:
          description: A boolean flag indicating if the consent is for a recurring payment or access.
          type: string
          example: "false"
        frequency:
          description: For recurring consents, this indicates the frequency (e.g., per day). '0' may indicate no limit.
          type: string
          example: "0"
        requestPayload:
          description: The original consent initiation request payload from the TPP.
          type: object
        attributes:
          description: A key-value map of additional, non-standard attributes associated with the consent.
          type: object
          properties:
            key:
              type: string
        authorizations:
          description: An array of authorization resources linked to this consent, detailing which users have acted upon it.
          type: array
          items:
            $ref: "#/components/schemas/ConsentAuthorizationCreatePayload"
    ConsentUpdateResponse:
      type: object
      description: A generic success response for consent management operations that return consent details.
      properties:
        id:
          description: Consent Id
          type: string
          example: "consent_id"
        requestPayload:
          description: The original consent initiation request payload from the TPP.
          type: object
        createdTime:
          type: integer
          format: int32
        updatedTime:
          type: integer
          format: int32
        clientId:
          type: string
        type:
          description: The type of consent (e.g., 'accounts', 'payments').
          type: string
          example: "accounts"
        status:
          description: The current status of the consent in its lifecycle (e.g., 'AwaitingAuthorisation', 'authorised', 'revoked', 'expired').
          type: string
          example: "AwaitingAuthorisation"
        frequency:
          description: For recurring consents, this indicates the frequency (e.g., per day). '0' may indicate no limit.
          type: string
          example: "0"
        validityTime:
          description: The duration for which the consent is valid, in seconds. '0' may indicate it does not expire automatically.
          type: string
          example: "0"
        recurringIndicator:
          description: A boolean flag indicating if the consent is for a recurring payment or access.
          type: string
          example: "false"
        attributes:
          description: A key-value map of additional, non-standard attributes associated with the consent.
          type: object
          properties:
            key:
              type: string
        authorizations:
          description: An array of authorization resources linked to this consent, detailing which users have acted upon it.
          type: array
          items:
            $ref: "#/components/schemas/ConsentAuthorizationCreateResponse"
        modifiedResponse:
          description: Optional field used to provide an alternative payload that overrides the original `requestPayload` during consent processing.
          type: object
    ConsentRetrievalResponse:
      description: The response body returned after successfully initiating a new consent.
      properties:
        id:
          description: Consent Id
          type: string
          example: "consent_id"
        requestPayload:
          description: The original consent initiation request payload from the TPP.
          type: object
        createdTime:
          type: integer
          format: int32
        updatedTime:
          type: integer
          format: int32
        clientId:
          type: string
        type:
          description: The type of consent (e.g., 'accounts', 'payments').
          type: string
          example: "accounts"
        status:
          description: The current status of the consent in its lifecycle (e.g., 'AwaitingAuthorisation', 'authorised', 'revoked', 'expired').
          type: string
          example: "AwaitingAuthorisation"
        frequency:
          description: For recurring consents, this indicates the frequency (e.g., per day). '0' may indicate no limit.
          type: string
          example: "0"
        validityTime:
          description: The duration for which the consent is valid, in seconds. '0' may indicate it does not expire automatically.
          type: string
          example: "0"
        recurringIndicator:
          description: A boolean flag indicating if the consent is for a recurring payment or access.
          type: string
          example: "false"

        attributes:
          description: A key-value map of additional, non-standard attributes associated with the consent.
          type: object
          properties:
            key:
              type: string
        authorizations:
          description: An array of authorization resources linked to this consent, detailing which users have acted upon it.
          type: array
          items:
            $ref: "#/components/schemas/ConsentAuthorizationCreateResponse"
        fileContent:
          description: File content
          type: string
        modifiedResponse:
          description: Optional field used to provide an alternative payload that overrides the original `requestPayload` during consent processing.
          type: object
    ConsentFileUploadResponse:
      type: object
      description: The response body returned after successfully uploading a file for a consent.
      properties:
        modifiedResponse:
          description: Optional field used to provide an alternative payload that overrides the response paylaod.
    ConsentFileUpdateResponse:
      type: object
      description: The response body returned after successfully updating a file for the consent.
      properties:
        modifiedResponse:
          description: Optional field used to provide an alternative payload that overrides the response paylaod.
    ConsentRevokedResponse:
      type: object
      description: The response body returned after successfully initiating a new consent.
      properties:
        currentStatus:
          description: The status of the consent after the change.
          type: string
          example: "revoked"
        actionTime:
          description: The Unix timestamp when the action occurred.
          type: integer
          example: 1758829540
        reason:
          description: The reason provided for the status change.
          type: string
          example: "Admin revoke"
        actionBy:
          description: The user or system that performed the action.
          type: string
          example: "admin@carbon.super"
        previousStatus:
          description: The status of the consent before the change.
          type: string
          example: "authorised"
    ConsentCreatedResponse:
      type: object
      description: The response body returned after successfully initiating a new consent.
      properties:
        id:
          description: Consent Id
          type: string
          example: "consent_id"
        requestPayload:
          description: The original consent initiation request payload from the TPP.
          type: object
        createdTime:
          type: integer
          format: int32
        updatedTime:
          type: integer
          format: int32
        clientId:
          type: string
        type:
          description: The type of consent (e.g., 'accounts', 'payments').
          type: string
          example: "accounts"
        status:
          description: The current status of the consent in its lifecycle (e.g., 'AwaitingAuthorisation', 'authorised', 'revoked', 'expired').
          type: string
          example: "AwaitingAuthorisation"
        frequency:
          description: For recurring consents, this indicates the frequency (e.g., per day). '0' may indicate no limit.
          type: string
          example: "0"
        validityTime:
          description: The duration for which the consent is valid, in seconds. '0' may indicate it does not expire automatically.
          type: string
          example: "0"
        recurringIndicator:
          description: A boolean flag indicating if the consent is for a recurring payment or access.
          type: string
          example: "false"
        attributes:
          description: A key-value map of additional, non-standard attributes associated with the consent.
          type: object
          properties:
            key:
              type: string
        authorizations:
          description: An array of authorization resources linked to this consent, detailing which users have acted upon it.
          type: array
          items:
            $ref: "#/components/schemas/ConsentAuthorizationCreateResponse"
        modifiedResponse:
          description: Optional field used to provide an alternative payload that overrides the original `requestPayload` during consent processing.
          type: object
    ConsentDetail:
      type: object
      description: A comprehensive object representing a single consent and all its associated data.
      properties:
        id:
          description: Consent Id
          type: string
          example: "consent_id"
        requestPayload:
          description: The original consent initiation request payload from the TPP.
          type: object
        createdTime:
          type: integer
          format: int32
        updatedTime:
          type: integer
          format: int32
        clientId:
          type: string
        type:
          description: The type of consent (e.g., 'accounts', 'payments').
          type: string
          example: "accounts"
        status:
          description: The current status of the consent in its lifecycle (e.g., 'AwaitingAuthorisation', 'authorised', 'revoked', 'expired').
          type: string
          example: "AwaitingAuthorisation"
        frequency:
          description: For recurring consents, this indicates the frequency (e.g., per day). '0' may indicate no limit.
          type: string
          example: "0"
        validityTime:
          description: The duration for which the consent is valid, in seconds. '0' may indicate it does not expire automatically.
          type: string
          example: "0"
        recurringIndicator:
          description: A boolean flag indicating if the consent is for a recurring payment or access.
          type: string
          example: "false"
        attributes:
          description: A key-value map of additional, non-standard attributes associated with the consent.
          type: object
          properties:
            key:
              type: string
        authorizations:
          description: An array of authorization resources linked to this consent, detailing which users have acted upon it.
          type: array
          items:
            $ref: "#/components/schemas/ConsentAuthorizationCreateResponse"
        fileContent:
          description: File content
          type: string
    ConsentSearchMetadata:
      type: object
      description: Pagination metadata returned with search results.
      properties:
        total:
          description: The total number of results available for the query, ignoring pagination.
          type: integer
        offset:
          description: The starting position of the returned result set.
          type: integer
        count:
          description: The number of results included in the current response.
          type: integer
        limit:
          description: The maximum number of results requested per page.
          type: integer
    ConsentAuthorizationResource:
      type: object
      description: Represents a specific authorization action taken on a consent by a user.
      properties:
        id:
          description: Auth Id
          type: string
          example: "auth_id"
        userId:
          description: The unique ID of the user who performed this authorization.
          type: string
          example: "admin@carbon.super"
        type:
          description: The type of authorization (e.g., 'authorisation', 're-authorisation').
          type: string
          example: "authorisation"
        status:
          description: The current status of this specific authorization (e.g., 'created', 'authorised', 'rejected').
          type: string
          example: "created"
        updatedTime:
          type: integer
          format: int32
        resource:
          description: Additional resource data related to the authorization.
          type: object
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
      description: Basic Authentication using username and password.